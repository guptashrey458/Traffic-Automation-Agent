{
  "component_type": "heatmap",
  "name": "demand_heatmap",
  "title": "Flight Demand Heatmap",
  "position": {
    "x": 0,
    "y": 0,
    "width": 8,
    "height": 10
  },
  "data_source": {
    "type": "api",
    "endpoint": "/flights/peaks",
    "method": "GET",
    "params": {
      "airport": "{{ airport_selector.value || 'BOM' }}",
      "bucket_minutes": "{{ bucket_selector.value || 10 }}",
      "date": "{{ date_picker.value || moment().format('YYYY-MM-DD') }}",
      "weather_regime": "{{ weather_selector.value || 'calm' }}"
    },
    "transform": "data.time_buckets"
  },
  "config": {
    "x_axis": {
      "field": "time_slot",
      "title": "Time (UTC)",
      "format": "HH:mm"
    },
    "y_axis": {
      "field": "runway",
      "title": "Runway"
    },
    "value_field": "demand_ratio",
    "color_scale": {
      "type": "sequential",
      "colors": ["#e8f5e8", "#ffeb3b", "#ff9800", "#f44336"],
      "domain": [0, 0.7, 0.9, 1.2],
      "labels": ["Low", "Medium", "High", "Overload"]
    },
    "tooltip": {
      "enabled": true,
      "template": "Time: {{x}}<br/>Runway: {{y}}<br/>Demand: {{demand}}/{{capacity}}<br/>Utilization: {{(demand_ratio * 100).toFixed(1)}}%"
    },
    "annotations": {
      "overload_windows": {
        "enabled": true,
        "color": "#f44336",
        "opacity": 0.3,
        "data_source": "data.overload_windows"
      }
    }
  },
  "interactions": {
    "click": {
      "action": "set_variable",
      "variable": "selected_time_slot",
      "value": "{{clickedData.x}}"
    },
    "hover": {
      "action": "highlight_related",
      "target": "flight_gantt"
    }
  },
  "refresh_trigger": ["airport_selector", "bucket_selector", "date_picker", "weather_selector"]
}