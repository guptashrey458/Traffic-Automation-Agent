{
  "component_type": "gantt_chart",
  "name": "flight_gantt",
  "title": "Flight Schedule Gantt Chart",
  "position": {
    "x": 8,
    "y": 0,
    "width": 4,
    "height": 10
  },
  "data_source": {
    "type": "api",
    "endpoint": "/flights/risks",
    "method": "GET",
    "params": {
      "airport": "{{ airport_selector.value || 'BOM' }}",
      "date": "{{ date_picker.value || moment().format('YYYY-MM-DD') }}",
      "risk_threshold": 0.0
    },
    "transform": "data.map(flight => ({ ...flight, start_time: flight.std_utc, end_time: flight.sta_utc }))"
  },
  "config": {
    "time_axis": {
      "field": "start_time",
      "format": "HH:mm",
      "range": "24h",
      "grid_lines": true,
      "tick_interval": "1h"
    },
    "resource_axis": {
      "field": "runway",
      "title": "Runway",
      "sort": "alphabetical"
    },
    "bar_config": {
      "height": 20,
      "margin": 2,
      "border_radius": 4
    },
    "color_coding": {
      "field": "departure_risk.risk_level",
      "scheme": {
        "low": "#4caf50",
        "medium": "#ff9800", 
        "high": "#f44336",
        "critical": "#9c27b0"
      },
      "legend": {
        "position": "bottom",
        "title": "Delay Risk Level"
      }
    },
    "labels": {
      "primary": "flight_no",
      "secondary": "aircraft_type",
      "position": "center"
    },
    "tooltip": {
      "enabled": true,
      "template": "Flight: {{flight_no}}<br/>Aircraft: {{aircraft_type}}<br/>STD: {{moment(std_utc).format('HH:mm')}}<br/>STA: {{moment(sta_utc).format('HH:mm')}}<br/>Delay Risk: {{departure_risk.probability.toFixed(2)}}<br/>Expected Delay: {{departure_risk.expected_delay_minutes}}min"
    }
  },
  "interactions": {
    "click": {
      "action": "open_modal",
      "modal": "flight_details_modal",
      "data": "{{clickedData}}"
    },
    "double_click": {
      "action": "set_variable",
      "variable": "whatif_flight_id",
      "value": "{{clickedData.flight_id}}"
    },
    "context_menu": [
      {
        "label": "What-if Analysis",
        "action": "open_modal",
        "modal": "whatif_modal",
        "data": "{{clickedData}}"
      },
      {
        "label": "View Risk Details",
        "action": "open_modal", 
        "modal": "risk_details_modal",
        "data": "{{clickedData}}"
      }
    ]
  },
  "filters": {
    "risk_level": {
      "type": "multi_select",
      "options": ["low", "medium", "high", "critical"],
      "default": ["medium", "high", "critical"]
    },
    "airline": {
      "type": "multi_select",
      "data_source": "data.map(f => f.flight_no.substring(0,2)).filter((v,i,a) => a.indexOf(v) === i)"
    }
  },
  "refresh_trigger": ["airport_selector", "date_picker", "optimization_complete"]
}