{
  "component_type": "action_button",
  "name": "optimize_button",
  "title": "Schedule Optimization",
  "position": {
    "x": 0,
    "y": 16,
    "width": 6,
    "height": 2
  },
  "config": {
    "button": {
      "label": "{{optimization_status === 'running' ? 'Optimizing...' : 'Run Optimization'}}",
      "style": "primary",
      "size": "large",
      "icon": "{{optimization_status === 'running' ? 'hourglass_empty' : 'auto_fix_high'}}",
      "disabled": "{{optimization_status === 'running'}}",
      "loading": "{{optimization_status === 'running'}}"
    },
    "progress_indicator": {
      "visible": "{{optimization_status === 'running'}}",
      "type": "linear",
      "value": "{{optimization_progress || 0}}",
      "max": 100,
      "color": "#1976d2",
      "height": 4,
      "animated": true
    },
    "status_text": {
      "visible": "{{optimization_status === 'running'}}",
      "text": "{{optimization_stage || 'Initializing optimization...'}}",
      "style": {
        "font_size": "12px",
        "color": "#666",
        "margin_top": "8px"
      }
    }
  },
  "action": {
    "type": "api_call",
    "endpoint": "/optimize",
    "method": "POST",
    "payload": {
      "airport": "{{ airport_selector.value || 'BOM' }}",
      "date": "{{ date_picker.value || moment().format('YYYY-MM-DD') }}",
      "flights": "{{ selected_flights || null }}",
      "objectives": {
        "delay_weight": "{{ delay_weight_slider.value || 1.0 }}",
        "taxi_weight": "{{ taxi_weight_slider.value || 0.3 }}",
        "runway_change_weight": "{{ runway_change_weight_slider.value || 0.2 }}"
      },
      "constraints": {
        "max_delay_minutes": "{{ max_delay_constraint.value || 60 }}",
        "respect_curfew": "{{ curfew_checkbox.value || true }}",
        "min_turnaround_minutes": "{{ min_turnaround_constraint.value || 45 }}"
      }
    },
    "on_start": [
      {
        "action": "set_variable",
        "variable": "optimization_status",
        "value": "running"
      },
      {
        "action": "set_variable", 
        "variable": "optimization_progress",
        "value": 0
      },
      {
        "action": "start_progress_simulation"
      }
    ],
    "on_success": [
      {
        "action": "set_variable",
        "variable": "optimization_status", 
        "value": "complete"
      },
      {
        "action": "set_variable",
        "variable": "optimization_result",
        "value": "{{response.data}}"
      },
      {
        "action": "set_variable",
        "variable": "optimization_progress",
        "value": 100
      },
      {
        "action": "trigger_refresh",
        "components": ["recommendation_cards", "flight_gantt", "metrics_summary"]
      },
      {
        "action": "show_notification",
        "type": "success",
        "title": "Optimization Complete",
        "message": "Found {{response.data.recommended_changes.length}} optimization opportunities"
      }
    ],
    "on_error": [
      {
        "action": "set_variable",
        "variable": "optimization_status",
        "value": "error"
      },
      {
        "action": "show_notification",
        "type": "error", 
        "title": "Optimization Failed",
        "message": "{{error.message || 'An error occurred during optimization'}}"
      }
    ]
  },
  "progress_simulation": {
    "stages": [
      {"progress": 10, "message": "Loading flight data...", "duration": 1000},
      {"progress": 25, "message": "Analyzing demand patterns...", "duration": 2000},
      {"progress": 40, "message": "Building constraint model...", "duration": 1500},
      {"progress": 60, "message": "Running optimization algorithm...", "duration": 3000},
      {"progress": 80, "message": "Validating solutions...", "duration": 1000},
      {"progress": 95, "message": "Generating recommendations...", "duration": 500}
    ]
  }
}